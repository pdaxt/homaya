<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QUASAR - Interactive Quantum Computing Lab</title>
    <style>
        :root {
            --bg-dark: #0a0a12;
            --bg-card: #0f0f1a;
            --bg-elevated: #161625;
            --border: #252540;
            --text: #f0f0f5;
            --text-dim: #8888aa;
            --accent: #00e5ff;
            --accent-glow: rgba(0, 229, 255, 0.3);
            --purple: #b366ff;
            --purple-glow: rgba(179, 102, 255, 0.3);
            --green: #00ff88;
            --red: #ff4466;
            --orange: #ffaa00;
            --gradient: linear-gradient(135deg, var(--accent), var(--purple));
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-dark);
            color: var(--text);
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Animated background */
        .bg-animation {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            opacity: 0.5;
        }

        .bg-animation::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle at 30% 30%, rgba(0, 229, 255, 0.05) 0%, transparent 50%),
                        radial-gradient(circle at 70% 70%, rgba(179, 102, 255, 0.05) 0%, transparent 50%);
            animation: bgPulse 20s ease-in-out infinite;
        }

        @keyframes bgPulse {
            0%, 100% { transform: translate(0, 0); }
            50% { transform: translate(-5%, -5%); }
        }

        /* Navigation */
        nav {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            background: rgba(10, 10, 18, 0.9);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--border);
            padding: 1rem 2rem;
        }

        .nav-content {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: 800;
            background: var(--gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            letter-spacing: 2px;
        }

        .nav-links {
            display: flex;
            gap: 0.5rem;
        }

        .nav-link {
            padding: 0.5rem 1rem;
            border-radius: 8px;
            color: var(--text-dim);
            text-decoration: none;
            font-size: 0.9rem;
            transition: all 0.3s;
            cursor: pointer;
        }

        .nav-link:hover, .nav-link.active {
            color: var(--text);
            background: var(--bg-elevated);
        }

        .nav-link.active {
            color: var(--accent);
        }

        /* Progress bar */
        .progress-container {
            position: fixed;
            top: 60px;
            left: 0;
            right: 0;
            height: 3px;
            background: var(--border);
            z-index: 999;
        }

        .progress-bar {
            height: 100%;
            background: var(--gradient);
            width: 0%;
            transition: width 0.5s ease;
        }

        /* Main content */
        main {
            padding-top: 80px;
        }

        .section {
            min-height: 100vh;
            padding: 4rem 2rem;
            display: none;
        }

        .section.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .section-content {
            max-width: 1200px;
            margin: 0 auto;
        }

        h1 {
            font-size: 3rem;
            margin-bottom: 0.5rem;
            background: var(--gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        h2 {
            font-size: 2rem;
            margin: 2rem 0 1rem;
            color: var(--accent);
        }

        h3 {
            font-size: 1.3rem;
            margin: 1.5rem 0 1rem;
            color: var(--purple);
        }

        p {
            color: var(--text-dim);
            line-height: 1.8;
            margin-bottom: 1rem;
            font-size: 1.1rem;
        }

        .lead {
            font-size: 1.3rem;
            color: var(--text);
            margin-bottom: 2rem;
        }

        /* Cards */
        .card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 2rem;
            margin: 1.5rem 0;
            transition: all 0.3s;
        }

        .card:hover {
            border-color: var(--accent);
            box-shadow: 0 0 30px var(--accent-glow);
        }

        .card-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }

        /* Interactive Qubit Visualization */
        .qubit-viz {
            background: var(--bg-elevated);
            border-radius: 20px;
            padding: 2rem;
            text-align: center;
        }

        .qubit-display {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 3rem;
            margin: 2rem 0;
            flex-wrap: wrap;
        }

        .qubit-sphere {
            position: relative;
            width: 200px;
            height: 200px;
        }

        .qubit-sphere svg {
            width: 100%;
            height: 100%;
        }

        .state-vector {
            stroke: var(--accent);
            stroke-width: 3;
            filter: drop-shadow(0 0 10px var(--accent));
            transition: all 0.5s ease;
        }

        .qubit-state {
            font-family: 'Courier New', monospace;
            font-size: 1.5rem;
            color: var(--accent);
            text-align: center;
        }

        .amplitude-bars {
            display: flex;
            gap: 2rem;
            justify-content: center;
            margin-top: 2rem;
        }

        .amplitude-bar {
            text-align: center;
        }

        .amplitude-bar .label {
            font-family: monospace;
            font-size: 1.2rem;
            margin-bottom: 0.5rem;
        }

        .amplitude-bar .bar-container {
            width: 60px;
            height: 150px;
            background: var(--bg-dark);
            border-radius: 8px;
            position: relative;
            overflow: hidden;
        }

        .amplitude-bar .bar-fill {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: var(--gradient);
            transition: height 0.5s ease;
            border-radius: 0 0 8px 8px;
        }

        .amplitude-bar .value {
            margin-top: 0.5rem;
            font-family: monospace;
            color: var(--text-dim);
        }

        /* Gate buttons */
        .gate-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            justify-content: center;
            margin: 1.5rem 0;
        }

        .gate-btn {
            padding: 0.8rem 1.5rem;
            background: var(--bg-elevated);
            border: 2px solid var(--border);
            border-radius: 10px;
            color: var(--text);
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            font-family: monospace;
        }

        .gate-btn:hover {
            border-color: var(--accent);
            background: rgba(0, 229, 255, 0.1);
            transform: translateY(-2px);
            box-shadow: 0 5px 20px var(--accent-glow);
        }

        .gate-btn:active {
            transform: translateY(0);
        }

        .gate-btn.applied {
            animation: gateApplied 0.5s ease;
        }

        @keyframes gateApplied {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); background: var(--accent); color: var(--bg-dark); }
            100% { transform: scale(1); }
        }

        /* Circuit Builder */
        .circuit-builder {
            background: var(--bg-elevated);
            border-radius: 20px;
            padding: 2rem;
            margin: 2rem 0;
        }

        .circuit-canvas {
            background: var(--bg-dark);
            border-radius: 12px;
            padding: 2rem;
            min-height: 200px;
            position: relative;
            overflow-x: auto;
        }

        .qubit-wire {
            display: flex;
            align-items: center;
            height: 60px;
            position: relative;
        }

        .wire-label {
            width: 50px;
            font-family: monospace;
            color: var(--accent);
            font-size: 1.1rem;
        }

        .wire-line {
            flex: 1;
            height: 2px;
            background: var(--border);
            position: relative;
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 0 1rem;
        }

        .circuit-gate {
            width: 40px;
            height: 40px;
            background: var(--bg-elevated);
            border: 2px solid var(--purple);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: monospace;
            font-weight: bold;
            color: var(--purple);
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            z-index: 10;
        }

        .circuit-gate:hover {
            background: var(--purple);
            color: var(--bg-dark);
            transform: scale(1.1);
        }

        .circuit-gate.control {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: var(--accent);
            border: none;
        }

        .circuit-gate.target {
            border-radius: 50%;
            border-color: var(--accent);
        }

        .cnot-line {
            position: absolute;
            width: 2px;
            background: var(--accent);
            left: 50%;
            transform: translateX(-50%);
        }

        /* Results display */
        .results-panel {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 1.5rem;
            margin-top: 1.5rem;
        }

        .probability-bars {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(80px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }

        .prob-item {
            text-align: center;
        }

        .prob-item .state-label {
            font-family: monospace;
            font-size: 0.9rem;
            color: var(--text-dim);
            margin-bottom: 0.5rem;
        }

        .prob-item .prob-bar {
            height: 100px;
            background: var(--bg-dark);
            border-radius: 8px;
            position: relative;
            overflow: hidden;
        }

        .prob-item .prob-fill {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: var(--gradient);
            transition: height 0.5s ease;
        }

        .prob-item .prob-value {
            font-family: monospace;
            font-size: 0.8rem;
            margin-top: 0.5rem;
            color: var(--accent);
        }

        /* Quiz section */
        .quiz-card {
            background: var(--bg-elevated);
            border-radius: 16px;
            padding: 2rem;
            margin: 1.5rem 0;
        }

        .quiz-question {
            font-size: 1.2rem;
            color: var(--text);
            margin-bottom: 1.5rem;
        }

        .quiz-options {
            display: grid;
            gap: 0.75rem;
        }

        .quiz-option {
            padding: 1rem 1.5rem;
            background: var(--bg-dark);
            border: 2px solid var(--border);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 1rem;
        }

        .quiz-option:hover {
            border-color: var(--accent);
            background: rgba(0, 229, 255, 0.05);
        }

        .quiz-option.correct {
            border-color: var(--green);
            background: rgba(0, 255, 136, 0.1);
        }

        .quiz-option.incorrect {
            border-color: var(--red);
            background: rgba(255, 68, 102, 0.1);
        }

        .quiz-feedback {
            margin-top: 1rem;
            padding: 1rem;
            border-radius: 8px;
            display: none;
        }

        .quiz-feedback.show {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        .quiz-feedback.correct {
            background: rgba(0, 255, 136, 0.1);
            border: 1px solid var(--green);
            color: var(--green);
        }

        .quiz-feedback.incorrect {
            background: rgba(255, 68, 102, 0.1);
            border: 1px solid var(--red);
            color: var(--red);
        }

        /* Buttons */
        .btn {
            padding: 1rem 2rem;
            background: var(--gradient);
            border: none;
            border-radius: 10px;
            color: var(--bg-dark);
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px var(--accent-glow);
        }

        .btn-secondary {
            background: var(--bg-elevated);
            border: 2px solid var(--border);
            color: var(--text);
        }

        .btn-secondary:hover {
            border-color: var(--accent);
            box-shadow: 0 10px 30px var(--accent-glow);
        }

        /* Animations */
        .pulse {
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .glow {
            filter: drop-shadow(0 0 20px var(--accent));
        }

        /* Concept cards */
        .concept-card {
            background: linear-gradient(135deg, var(--bg-card), var(--bg-elevated));
            border: 1px solid var(--border);
            border-radius: 20px;
            padding: 2rem;
            position: relative;
            overflow: hidden;
        }

        .concept-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--gradient);
        }

        .concept-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
        }

        .concept-card h3 {
            margin-top: 0;
        }

        /* Interactive state display */
        .state-display {
            font-family: 'Courier New', monospace;
            font-size: 2rem;
            text-align: center;
            padding: 2rem;
            background: var(--bg-dark);
            border-radius: 12px;
            margin: 1rem 0;
        }

        .state-display .ket {
            color: var(--purple);
        }

        .state-display .amplitude {
            color: var(--accent);
        }

        .state-display .plus {
            color: var(--text-dim);
            margin: 0 0.5rem;
        }

        /* History panel */
        .history-panel {
            background: var(--bg-dark);
            border-radius: 12px;
            padding: 1rem;
            max-height: 200px;
            overflow-y: auto;
            margin-top: 1rem;
        }

        .history-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem;
            border-radius: 6px;
            font-family: monospace;
            font-size: 0.9rem;
            color: var(--text-dim);
        }

        .history-item:hover {
            background: var(--bg-elevated);
        }

        .history-item .gate-tag {
            background: var(--purple);
            color: var(--bg-dark);
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
            font-weight: bold;
        }

        /* Tooltip */
        .tooltip {
            position: relative;
        }

        .tooltip::after {
            content: attr(data-tip);
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            padding: 0.5rem 1rem;
            background: var(--bg-elevated);
            border: 1px solid var(--border);
            border-radius: 8px;
            font-size: 0.8rem;
            white-space: nowrap;
            opacity: 0;
            pointer-events: none;
            transition: all 0.3s;
        }

        .tooltip:hover::after {
            opacity: 1;
            transform: translateX(-50%) translateY(-5px);
        }

        /* Responsive */
        @media (max-width: 768px) {
            h1 { font-size: 2rem; }
            .nav-links { display: none; }
            .qubit-display { flex-direction: column; }
            .section { padding: 2rem 1rem; }
        }

        /* Code block */
        .code-block {
            background: #1a1a2e;
            border-radius: 12px;
            padding: 1.5rem;
            overflow-x: auto;
            font-family: 'Fira Code', monospace;
            font-size: 0.9rem;
            line-height: 1.6;
            margin: 1rem 0;
        }

        .code-block .keyword { color: var(--purple); }
        .code-block .function { color: var(--accent); }
        .code-block .number { color: var(--orange); }
        .code-block .comment { color: var(--text-dim); }
        .code-block .string { color: var(--green); }

        /* Achievement badge */
        .achievement {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            background: var(--gradient);
            border-radius: 20px;
            color: var(--bg-dark);
            font-weight: 600;
            font-size: 0.9rem;
        }

        /* Next/Prev buttons */
        .nav-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 3rem;
            padding-top: 2rem;
            border-top: 1px solid var(--border);
        }
    </style>
</head>
<body>
    <div class="bg-animation"></div>

    <nav>
        <div class="nav-content">
            <div class="logo">QUASAR LAB</div>
            <div class="nav-links">
                <a class="nav-link active" data-section="intro">Start</a>
                <a class="nav-link" data-section="classical">Classical Bits</a>
                <a class="nav-link" data-section="qubit">Qubits</a>
                <a class="nav-link" data-section="superposition">Superposition</a>
                <a class="nav-link" data-section="gates">Gates</a>
                <a class="nav-link" data-section="entanglement">Entanglement</a>
                <a class="nav-link" data-section="playground">Playground</a>
            </div>
        </div>
    </nav>

    <div class="progress-container">
        <div class="progress-bar" id="progressBar"></div>
    </div>

    <main>
        <!-- INTRO SECTION -->
        <section class="section active" id="intro">
            <div class="section-content">
                <h1>Welcome to Quantum Computing</h1>
                <p class="lead">An interactive journey from zero to understanding quantum mechanics and computation.</p>

                <div class="card-grid">
                    <div class="concept-card">
                        <div class="concept-icon">üåü</div>
                        <h3>No Prerequisites</h3>
                        <p>You don't need physics or math background. We'll explain everything step by step with interactive examples.</p>
                    </div>
                    <div class="concept-card">
                        <div class="concept-icon">üéÆ</div>
                        <h3>Learn by Doing</h3>
                        <p>Every concept has interactive visualizations. Click buttons, drag gates, and see quantum states evolve in real-time.</p>
                    </div>
                    <div class="concept-card">
                        <div class="concept-icon">üß™</div>
                        <h3>Real Simulator</h3>
                        <p>QUASAR is a real quantum computer simulator. Everything you see is mathematically accurate.</p>
                    </div>
                </div>

                <div class="card" style="text-align: center; margin-top: 3rem;">
                    <h3>Ready to enter the quantum realm?</h3>
                    <p>Click the button below to begin your journey.</p>
                    <button class="btn" onclick="goToSection('classical')" style="margin-top: 1rem;">
                        Start Learning ‚Üí
                    </button>
                </div>
            </div>
        </section>

        <!-- CLASSICAL BITS SECTION -->
        <section class="section" id="classical">
            <div class="section-content">
                <h1>Chapter 1: Classical Bits</h1>
                <p class="lead">Before we understand qubits, let's make sure we understand regular bits.</p>

                <div class="card">
                    <h3>What is a Bit?</h3>
                    <p>A <strong>bit</strong> is the smallest unit of information in a computer. It can only be in one of two states:</p>

                    <div style="display: flex; justify-content: center; gap: 4rem; margin: 2rem 0;">
                        <div style="text-align: center;">
                            <div style="width: 100px; height: 100px; background: var(--bg-dark); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 3rem; font-weight: bold; color: var(--text-dim); border: 3px solid var(--border);">0</div>
                            <p style="margin-top: 1rem;">OFF / False / No</p>
                        </div>
                        <div style="text-align: center;">
                            <div style="width: 100px; height: 100px; background: var(--gradient); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 3rem; font-weight: bold; color: var(--bg-dark);">1</div>
                            <p style="margin-top: 1rem;">ON / True / Yes</p>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h3>Try It: Click the Bit</h3>
                    <p>Click the bit below to toggle between 0 and 1:</p>

                    <div style="text-align: center; margin: 2rem 0;">
                        <div id="classicalBit" onclick="toggleClassicalBit()" style="width: 120px; height: 120px; background: var(--bg-dark); border-radius: 50%; display: inline-flex; align-items: center; justify-content: center; font-size: 4rem; font-weight: bold; color: var(--text-dim); border: 4px solid var(--border); cursor: pointer; transition: all 0.3s; user-select: none;">0</div>
                        <p id="bitExplanation" style="margin-top: 1rem; font-size: 1.2rem;">The bit is currently <strong>OFF (0)</strong></p>
                    </div>
                </div>

                <div class="card">
                    <h3>The Key Limitation</h3>
                    <p>A classical bit is <strong>always</strong> either 0 or 1. Never both. Never in between. Never uncertain.</p>
                    <p>This is like a light switch - it's either ON or OFF. You can't have it "kind of on."</p>

                    <div class="quiz-card" style="margin-top: 2rem;">
                        <div class="quiz-question">Quick Check: Can a classical bit be 0 and 1 at the same time?</div>
                        <div class="quiz-options">
                            <div class="quiz-option" onclick="checkAnswer(this, false)">Yes, if you're really fast</div>
                            <div class="quiz-option" onclick="checkAnswer(this, true)">No, it's always one or the other</div>
                            <div class="quiz-option" onclick="checkAnswer(this, false)">Sometimes, depending on the computer</div>
                        </div>
                        <div class="quiz-feedback" id="quiz1Feedback"></div>
                    </div>
                </div>

                <div class="nav-buttons">
                    <button class="btn btn-secondary" onclick="goToSection('intro')">‚Üê Back</button>
                    <button class="btn" onclick="goToSection('qubit')">Next: Qubits ‚Üí</button>
                </div>
            </div>
        </section>

        <!-- QUBIT SECTION -->
        <section class="section" id="qubit">
            <div class="section-content">
                <h1>Chapter 2: Meet the Qubit</h1>
                <p class="lead">A qubit is a quantum bit - and it breaks the rules you just learned.</p>

                <div class="card">
                    <h3>The Quantum Difference</h3>
                    <p>Unlike a classical bit that must be 0 OR 1, a qubit can be in a <strong>superposition</strong> of both states simultaneously.</p>

                    <div style="display: flex; justify-content: center; align-items: center; gap: 2rem; margin: 2rem 0; flex-wrap: wrap;">
                        <div style="text-align: center;">
                            <div style="width: 80px; height: 80px; background: var(--bg-dark); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 2rem; font-weight: bold; color: var(--text-dim); border: 3px solid var(--border);">0</div>
                            <p style="margin-top: 0.5rem; font-size: 0.9rem;">State |0‚ü©</p>
                        </div>
                        <div style="font-size: 2rem; color: var(--accent);">+</div>
                        <div style="text-align: center;">
                            <div style="width: 80px; height: 80px; background: var(--gradient); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 2rem; font-weight: bold; color: var(--bg-dark);">1</div>
                            <p style="margin-top: 0.5rem; font-size: 0.9rem;">State |1‚ü©</p>
                        </div>
                        <div style="font-size: 2rem; color: var(--accent);">=</div>
                        <div style="text-align: center;">
                            <div style="width: 100px; height: 100px; background: linear-gradient(135deg, var(--bg-dark) 50%, var(--accent) 50%); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; font-weight: bold; color: var(--text); border: 3px solid var(--purple); animation: pulse 2s infinite;">?</div>
                            <p style="margin-top: 0.5rem; font-size: 0.9rem;">Superposition!</p>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h3>The Coin Analogy</h3>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; margin: 1rem 0;">
                        <div style="text-align: center; padding: 1.5rem; background: var(--bg-dark); border-radius: 12px;">
                            <div style="font-size: 3rem; margin-bottom: 1rem;">ü™ô</div>
                            <h4 style="color: var(--text);">Classical Bit</h4>
                            <p>A coin <strong>lying on the table</strong></p>
                            <p style="color: var(--text); font-size: 1.1rem; margin-top: 0.5rem;">Definitely heads OR tails</p>
                        </div>
                        <div style="text-align: center; padding: 1.5rem; background: var(--bg-dark); border-radius: 12px;">
                            <div style="font-size: 3rem; margin-bottom: 1rem; animation: pulse 1s infinite;">üåÄ</div>
                            <h4 style="color: var(--accent);">Qubit</h4>
                            <p>A coin <strong>spinning in the air</strong></p>
                            <p style="color: var(--accent); font-size: 1.1rem; margin-top: 0.5rem;">Both heads AND tails until it lands!</p>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h3>Probability Amplitudes</h3>
                    <p>A qubit's state is described by two numbers called <strong>amplitudes</strong>. These tell us the probability of measuring 0 or 1.</p>

                    <div class="state-display" style="margin: 2rem 0;">
                        <span class="ket">|œà‚ü©</span> =
                        <span class="amplitude">Œ±</span><span class="ket">|0‚ü©</span>
                        <span class="plus">+</span>
                        <span class="amplitude">Œ≤</span><span class="ket">|1‚ü©</span>
                    </div>

                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; text-align: center;">
                        <div>
                            <div style="font-size: 2rem; color: var(--accent); font-family: monospace;">Œ±</div>
                            <p>Amplitude for |0‚ü©</p>
                            <p style="color: var(--text);">|Œ±|¬≤ = probability of measuring 0</p>
                        </div>
                        <div>
                            <div style="font-size: 2rem; color: var(--purple); font-family: monospace;">Œ≤</div>
                            <p>Amplitude for |1‚ü©</p>
                            <p style="color: var(--text);">|Œ≤|¬≤ = probability of measuring 1</p>
                        </div>
                    </div>

                    <div style="text-align: center; margin-top: 2rem; padding: 1rem; background: var(--bg-dark); border-radius: 8px;">
                        <p style="color: var(--green); font-size: 1.2rem; margin: 0;"><strong>Rule:</strong> |Œ±|¬≤ + |Œ≤|¬≤ = 1 (probabilities must sum to 100%)</p>
                    </div>
                </div>

                <div class="nav-buttons">
                    <button class="btn btn-secondary" onclick="goToSection('classical')">‚Üê Back</button>
                    <button class="btn" onclick="goToSection('superposition')">Next: Superposition ‚Üí</button>
                </div>
            </div>
        </section>

        <!-- SUPERPOSITION SECTION -->
        <section class="section" id="superposition">
            <div class="section-content">
                <h1>Chapter 3: Superposition</h1>
                <p class="lead">Let's actually see superposition in action.</p>

                <div class="qubit-viz">
                    <h3>Interactive Qubit Simulator</h3>
                    <p>Click the gate buttons to transform the qubit state</p>

                    <div class="qubit-display">
                        <div>
                            <div class="state-display" id="stateDisplay">
                                <span class="amplitude">1.00</span><span class="ket">|0‚ü©</span>
                                <span class="plus">+</span>
                                <span class="amplitude">0.00</span><span class="ket">|1‚ü©</span>
                            </div>
                            <p id="stateExplanation" style="color: var(--text-dim); margin-top: 1rem;">
                                The qubit is in state |0‚ü© with 100% certainty
                            </p>
                        </div>

                        <div class="amplitude-bars">
                            <div class="amplitude-bar">
                                <div class="label">|0‚ü©</div>
                                <div class="bar-container">
                                    <div class="bar-fill" id="amp0Bar" style="height: 100%;"></div>
                                </div>
                                <div class="value" id="amp0Value">100%</div>
                            </div>
                            <div class="amplitude-bar">
                                <div class="label">|1‚ü©</div>
                                <div class="bar-container">
                                    <div class="bar-fill" id="amp1Bar" style="height: 0%;"></div>
                                </div>
                                <div class="value" id="amp1Value">0%</div>
                            </div>
                        </div>
                    </div>

                    <div class="gate-buttons">
                        <button class="gate-btn tooltip" data-tip="Flip: |0‚ü©‚Üî|1‚ü©" onclick="applyGate('X')">X</button>
                        <button class="gate-btn tooltip" data-tip="Create superposition" onclick="applyGate('H')">H</button>
                        <button class="gate-btn tooltip" data-tip="Phase flip on |1‚ü©" onclick="applyGate('Z')">Z</button>
                        <button class="gate-btn tooltip" data-tip="Reset to |0‚ü©" onclick="resetQubit()">Reset</button>
                    </div>

                    <div class="history-panel">
                        <div style="color: var(--text-dim); margin-bottom: 0.5rem; font-size: 0.8rem;">Gate History:</div>
                        <div id="gateHistory">
                            <div class="history-item" style="color: var(--text-dim);">Click a gate to begin...</div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h3>What Just Happened?</h3>
                    <div id="gateExplanation">
                        <p>Click a gate above to see an explanation of what it does!</p>
                    </div>
                </div>

                <div class="card">
                    <h3>The Hadamard Gate (H)</h3>
                    <p>This is the most important gate for creating superposition. It transforms:</p>
                    <ul style="margin: 1rem 0 1rem 2rem; line-height: 2;">
                        <li><strong>|0‚ü© ‚Üí (|0‚ü© + |1‚ü©)/‚àö2</strong> ‚Äî Equal superposition, both positive</li>
                        <li><strong>|1‚ü© ‚Üí (|0‚ü© - |1‚ü©)/‚àö2</strong> ‚Äî Equal superposition, opposite phases</li>
                    </ul>
                    <p>The ‚àö2 keeps the probabilities summing to 1. (1/‚àö2)¬≤ + (1/‚àö2)¬≤ = 0.5 + 0.5 = 1 ‚úì</p>
                </div>

                <div class="quiz-card">
                    <div class="quiz-question">If you apply H to |0‚ü©, what's the probability of measuring 1?</div>
                    <div class="quiz-options">
                        <div class="quiz-option" onclick="checkAnswer(this, false, 'quiz2')">0% - it stays at 0</div>
                        <div class="quiz-option" onclick="checkAnswer(this, true, 'quiz2')">50% - equal superposition</div>
                        <div class="quiz-option" onclick="checkAnswer(this, false, 'quiz2')">100% - it flips to 1</div>
                        <div class="quiz-option" onclick="checkAnswer(this, false, 'quiz2')">25% - partial superposition</div>
                    </div>
                    <div class="quiz-feedback" id="quiz2Feedback"></div>
                </div>

                <div class="nav-buttons">
                    <button class="btn btn-secondary" onclick="goToSection('qubit')">‚Üê Back</button>
                    <button class="btn" onclick="goToSection('gates')">Next: More Gates ‚Üí</button>
                </div>
            </div>
        </section>

        <!-- GATES SECTION -->
        <section class="section" id="gates">
            <div class="section-content">
                <h1>Chapter 4: Quantum Gates</h1>
                <p class="lead">Gates are operations that transform qubit states. Let's learn the essential ones.</p>

                <div class="card-grid">
                    <div class="card">
                        <h3 style="display: flex; align-items: center; gap: 0.5rem;">
                            <span style="background: var(--purple); color: white; padding: 0.3rem 0.6rem; border-radius: 6px; font-family: monospace;">X</span>
                            Pauli-X (NOT Gate)
                        </h3>
                        <p>Flips the qubit state:</p>
                        <div style="font-family: monospace; background: var(--bg-dark); padding: 1rem; border-radius: 8px; margin: 1rem 0;">
                            |0‚ü© ‚Üí |1‚ü©<br>
                            |1‚ü© ‚Üí |0‚ü©
                        </div>
                        <p style="color: var(--text-dim);">Like a classical NOT gate - toggles between 0 and 1.</p>
                    </div>

                    <div class="card">
                        <h3 style="display: flex; align-items: center; gap: 0.5rem;">
                            <span style="background: var(--accent); color: var(--bg-dark); padding: 0.3rem 0.6rem; border-radius: 6px; font-family: monospace;">H</span>
                            Hadamard
                        </h3>
                        <p>Creates superposition:</p>
                        <div style="font-family: monospace; background: var(--bg-dark); padding: 1rem; border-radius: 8px; margin: 1rem 0;">
                            |0‚ü© ‚Üí (|0‚ü©+|1‚ü©)/‚àö2<br>
                            |1‚ü© ‚Üí (|0‚ü©-|1‚ü©)/‚àö2
                        </div>
                        <p style="color: var(--text-dim);">The gateway to quantum advantage!</p>
                    </div>

                    <div class="card">
                        <h3 style="display: flex; align-items: center; gap: 0.5rem;">
                            <span style="background: var(--green); color: var(--bg-dark); padding: 0.3rem 0.6rem; border-radius: 6px; font-family: monospace;">Z</span>
                            Pauli-Z (Phase Flip)
                        </h3>
                        <p>Flips the phase of |1‚ü©:</p>
                        <div style="font-family: monospace; background: var(--bg-dark); padding: 1rem; border-radius: 8px; margin: 1rem 0;">
                            |0‚ü© ‚Üí |0‚ü©<br>
                            |1‚ü© ‚Üí -|1‚ü©
                        </div>
                        <p style="color: var(--text-dim);">Doesn't change probabilities, but changes the phase!</p>
                    </div>

                    <div class="card">
                        <h3 style="display: flex; align-items: center; gap: 0.5rem;">
                            <span style="background: var(--orange); color: var(--bg-dark); padding: 0.3rem 0.6rem; border-radius: 6px; font-family: monospace;">CNOT</span>
                            Controlled-NOT
                        </h3>
                        <p>A two-qubit gate:</p>
                        <div style="font-family: monospace; background: var(--bg-dark); padding: 1rem; border-radius: 8px; margin: 1rem 0;">
                            Flips target qubit<br>
                            IF control qubit is |1‚ü©
                        </div>
                        <p style="color: var(--text-dim);">Essential for creating entanglement!</p>
                    </div>
                </div>

                <div class="card">
                    <h3>Why Phase Matters</h3>
                    <p>You might think: "If Z doesn't change probabilities, why does it matter?"</p>
                    <p>Watch this:</p>

                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; margin: 2rem 0;">
                        <div style="text-align: center; padding: 1.5rem; background: var(--bg-dark); border-radius: 12px;">
                            <div style="font-family: monospace; color: var(--accent); margin-bottom: 1rem;">H ‚Üí H</div>
                            <div style="font-family: monospace;">|0‚ü© ‚Üí |0‚ü©</div>
                            <p style="margin-top: 1rem; color: var(--green);">Back to where we started!</p>
                        </div>
                        <div style="text-align: center; padding: 1.5rem; background: var(--bg-dark); border-radius: 12px;">
                            <div style="font-family: monospace; color: var(--accent); margin-bottom: 1rem;">H ‚Üí Z ‚Üí H</div>
                            <div style="font-family: monospace;">|0‚ü© ‚Üí |1‚ü©</div>
                            <p style="margin-top: 1rem; color: var(--red);">Ended up at |1‚ü©!</p>
                        </div>
                    </div>

                    <p>The Z gate changed the <em>phase</em>, which affected how the amplitudes interfere when we applied the second H. This is <strong>quantum interference</strong> - the secret sauce of quantum computing!</p>
                </div>

                <div class="nav-buttons">
                    <button class="btn btn-secondary" onclick="goToSection('superposition')">‚Üê Back</button>
                    <button class="btn" onclick="goToSection('entanglement')">Next: Entanglement ‚Üí</button>
                </div>
            </div>
        </section>

        <!-- ENTANGLEMENT SECTION -->
        <section class="section" id="entanglement">
            <div class="section-content">
                <h1>Chapter 5: Entanglement</h1>
                <p class="lead">The "spooky" phenomenon that makes quantum computing powerful.</p>

                <div class="card">
                    <h3>What is Entanglement?</h3>
                    <p>When qubits are <strong>entangled</strong>, measuring one instantly determines what you'll measure on the other - no matter how far apart they are!</p>

                    <div style="text-align: center; margin: 2rem 0;">
                        <div style="font-size: 1.5rem; color: var(--accent); font-family: monospace;">
                            |Bell‚ü© = (|00‚ü© + |11‚ü©) / ‚àö2
                        </div>
                        <p style="margin-top: 1rem;">This is called a <strong>Bell State</strong> - maximum entanglement!</p>
                    </div>
                </div>

                <div class="card">
                    <h3>Interactive: Create a Bell State</h3>
                    <p>Watch how we entangle two qubits step by step:</p>

                    <div class="circuit-builder">
                        <div style="display: flex; gap: 1rem; margin-bottom: 1rem;">
                            <button class="btn" id="bellStep1" onclick="bellStateStep(1)">Step 1: Apply H</button>
                            <button class="btn btn-secondary" id="bellStep2" onclick="bellStateStep(2)" disabled>Step 2: Apply CNOT</button>
                            <button class="btn btn-secondary" onclick="bellStateReset()">Reset</button>
                        </div>

                        <div class="circuit-canvas">
                            <div class="qubit-wire">
                                <div class="wire-label">q0</div>
                                <div class="wire-line">
                                    <div class="circuit-gate" id="bellH" style="opacity: 0.3;">H</div>
                                    <div class="circuit-gate control" id="bellControl" style="opacity: 0.3;"></div>
                                </div>
                            </div>
                            <div class="qubit-wire">
                                <div class="wire-label">q1</div>
                                <div class="wire-line">
                                    <div style="width: 40px;"></div>
                                    <div class="circuit-gate target" id="bellTarget" style="opacity: 0.3;">X</div>
                                </div>
                            </div>
                        </div>

                        <div class="results-panel">
                            <h4 style="margin-bottom: 1rem;">State Probabilities</h4>
                            <div class="probability-bars" id="bellProbs">
                                <div class="prob-item">
                                    <div class="state-label">|00‚ü©</div>
                                    <div class="prob-bar"><div class="prob-fill" id="prob00" style="height: 100%;"></div></div>
                                    <div class="prob-value" id="val00">100%</div>
                                </div>
                                <div class="prob-item">
                                    <div class="state-label">|01‚ü©</div>
                                    <div class="prob-bar"><div class="prob-fill" id="prob01" style="height: 0%;"></div></div>
                                    <div class="prob-value" id="val01">0%</div>
                                </div>
                                <div class="prob-item">
                                    <div class="state-label">|10‚ü©</div>
                                    <div class="prob-bar"><div class="prob-fill" id="prob10" style="height: 0%;"></div></div>
                                    <div class="prob-value" id="val10">0%</div>
                                </div>
                                <div class="prob-item">
                                    <div class="state-label">|11‚ü©</div>
                                    <div class="prob-bar"><div class="prob-fill" id="prob11" style="height: 0%;"></div></div>
                                    <div class="prob-value" id="val11">0%</div>
                                </div>
                            </div>
                            <p id="bellExplanation" style="margin-top: 1rem; text-align: center;">
                                Initial state: Both qubits are |0‚ü©
                            </p>
                        </div>
                    </div>
                </div>

                <div class="card" style="border-color: var(--purple);">
                    <h3>ü§Ø The Mind-Blowing Part</h3>
                    <p>After creating the Bell state, notice:</p>
                    <ul style="margin: 1rem 0 1rem 2rem; line-height: 2;">
                        <li><strong>|00‚ü© has 50% probability</strong> - both qubits are 0</li>
                        <li><strong>|11‚ü© has 50% probability</strong> - both qubits are 1</li>
                        <li><strong>|01‚ü© and |10‚ü© have 0% probability</strong> - they can NEVER be different!</li>
                    </ul>
                    <p style="color: var(--accent); font-size: 1.1rem;">
                        The qubits are perfectly correlated. Measure one, and you <em>instantly</em> know the other - even if it's on the other side of the universe!
                    </p>
                </div>

                <div class="nav-buttons">
                    <button class="btn btn-secondary" onclick="goToSection('gates')">‚Üê Back</button>
                    <button class="btn" onclick="goToSection('playground')">Next: Playground ‚Üí</button>
                </div>
            </div>
        </section>

        <!-- PLAYGROUND SECTION -->
        <section class="section" id="playground">
            <div class="section-content">
                <h1>Quantum Playground</h1>
                <p class="lead">Build your own quantum circuits and see the results!</p>

                <div class="circuit-builder">
                    <h3>Circuit Builder</h3>
                    <p>Click gates to add them to the circuit. The simulator updates in real-time.</p>

                    <div style="display: flex; gap: 1rem; margin: 1.5rem 0; flex-wrap: wrap;">
                        <span style="color: var(--text-dim);">Add gate:</span>
                        <button class="gate-btn" onclick="addToCircuit('H', 0)">H(q0)</button>
                        <button class="gate-btn" onclick="addToCircuit('H', 1)">H(q1)</button>
                        <button class="gate-btn" onclick="addToCircuit('X', 0)">X(q0)</button>
                        <button class="gate-btn" onclick="addToCircuit('X', 1)">X(q1)</button>
                        <button class="gate-btn" onclick="addToCircuit('Z', 0)">Z(q0)</button>
                        <button class="gate-btn" onclick="addToCircuit('Z', 1)">Z(q1)</button>
                        <button class="gate-btn" onclick="addToCircuit('CNOT', 0)">CNOT(0‚Üí1)</button>
                        <button class="gate-btn" onclick="addToCircuit('CNOT', 1)">CNOT(1‚Üí0)</button>
                        <button class="gate-btn" style="border-color: var(--red);" onclick="clearCircuit()">Clear</button>
                    </div>

                    <div class="circuit-canvas" id="playgroundCircuit">
                        <div class="qubit-wire">
                            <div class="wire-label">q0</div>
                            <div class="wire-line" id="wire0"></div>
                        </div>
                        <div class="qubit-wire">
                            <div class="wire-label">q1</div>
                            <div class="wire-line" id="wire1"></div>
                        </div>
                    </div>

                    <div class="results-panel">
                        <h4>Live Results</h4>
                        <div class="probability-bars" id="playgroundProbs">
                            <div class="prob-item">
                                <div class="state-label">|00‚ü©</div>
                                <div class="prob-bar"><div class="prob-fill" id="pg00" style="height: 100%;"></div></div>
                                <div class="prob-value" id="pgv00">100%</div>
                            </div>
                            <div class="prob-item">
                                <div class="state-label">|01‚ü©</div>
                                <div class="prob-bar"><div class="prob-fill" id="pg01" style="height: 0%;"></div></div>
                                <div class="prob-value" id="pgv01">0%</div>
                            </div>
                            <div class="prob-item">
                                <div class="state-label">|10‚ü©</div>
                                <div class="prob-bar"><div class="prob-fill" id="pg10" style="height: 0%;"></div></div>
                                <div class="prob-value" id="pgv10">0%</div>
                            </div>
                            <div class="prob-item">
                                <div class="state-label">|11‚ü©</div>
                                <div class="prob-bar"><div class="prob-fill" id="pg11" style="height: 0%;"></div></div>
                                <div class="prob-value" id="pgv11">0%</div>
                            </div>
                        </div>

                        <div id="playgroundState" class="state-display" style="margin-top: 1rem; font-size: 1.2rem;">
                            1.00|00‚ü©
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h3>Challenges</h3>
                    <div class="card-grid">
                        <div class="quiz-card">
                            <div class="quiz-question">Challenge 1: Create the state |11‚ü©</div>
                            <p style="color: var(--text-dim);">Hint: You need to flip both qubits</p>
                        </div>
                        <div class="quiz-card">
                            <div class="quiz-question">Challenge 2: Create a Bell state (|00‚ü©+|11‚ü©)/‚àö2</div>
                            <p style="color: var(--text-dim);">Hint: H on one qubit, then CNOT</p>
                        </div>
                        <div class="quiz-card">
                            <div class="quiz-question">Challenge 3: Create (|01‚ü©+|10‚ü©)/‚àö2</div>
                            <p style="color: var(--text-dim);">Hint: Like Bell state, but flip one qubit first</p>
                        </div>
                    </div>
                </div>

                <div class="card" style="text-align: center; border-color: var(--green);">
                    <h3>üéâ Congratulations!</h3>
                    <p>You've learned the fundamentals of quantum computing:</p>
                    <ul style="text-align: left; max-width: 400px; margin: 1rem auto; line-height: 2;">
                        <li>‚úì Qubits and superposition</li>
                        <li>‚úì Probability amplitudes</li>
                        <li>‚úì Quantum gates (X, H, Z, CNOT)</li>
                        <li>‚úì Entanglement and Bell states</li>
                        <li>‚úì Building quantum circuits</li>
                    </ul>
                    <p style="color: var(--accent); font-size: 1.2rem; margin-top: 1.5rem;">
                        You're now ready to explore real quantum algorithms!
                    </p>
                </div>
            </div>
        </section>
    </main>

    <script>
        // Navigation
        const sections = ['intro', 'classical', 'qubit', 'superposition', 'gates', 'entanglement', 'playground'];
        let currentSection = 0;

        function goToSection(sectionId) {
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));

            document.getElementById(sectionId).classList.add('active');
            document.querySelector(`[data-section="${sectionId}"]`).classList.add('active');

            currentSection = sections.indexOf(sectionId);
            updateProgress();
            window.scrollTo(0, 0);
        }

        function updateProgress() {
            const progress = ((currentSection + 1) / sections.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
        }

        document.querySelectorAll('.nav-link').forEach(link => {
            link.addEventListener('click', () => goToSection(link.dataset.section));
        });

        // Classical bit toggle
        let classicalBitState = 0;
        function toggleClassicalBit() {
            classicalBitState = 1 - classicalBitState;
            const bit = document.getElementById('classicalBit');
            const explanation = document.getElementById('bitExplanation');

            if (classicalBitState === 1) {
                bit.textContent = '1';
                bit.style.background = 'var(--gradient)';
                bit.style.color = 'var(--bg-dark)';
                bit.style.borderColor = 'var(--accent)';
                explanation.innerHTML = 'The bit is currently <strong>ON (1)</strong>';
            } else {
                bit.textContent = '0';
                bit.style.background = 'var(--bg-dark)';
                bit.style.color = 'var(--text-dim)';
                bit.style.borderColor = 'var(--border)';
                explanation.innerHTML = 'The bit is currently <strong>OFF (0)</strong>';
            }
        }

        // Quiz checking
        function checkAnswer(option, isCorrect, quizId = 'quiz1') {
            const options = option.parentElement.querySelectorAll('.quiz-option');
            options.forEach(opt => {
                opt.style.pointerEvents = 'none';
                if (opt === option) {
                    opt.classList.add(isCorrect ? 'correct' : 'incorrect');
                }
            });

            const feedback = document.getElementById(quizId + 'Feedback');
            feedback.classList.add('show', isCorrect ? 'correct' : 'incorrect');
            feedback.textContent = isCorrect
                ? '‚úì Correct! ' + (quizId === 'quiz2' ? 'The Hadamard gate creates a perfect 50/50 superposition.' : 'Classical bits can only be one value at a time.')
                : '‚úó Not quite. ' + (quizId === 'quiz2' ? 'H creates equal superposition - 50% chance of each outcome.' : 'Classical bits are always definitely 0 or definitely 1.');
        }

        // Single qubit simulator
        let qubitState = { alpha: { re: 1, im: 0 }, beta: { re: 0, im: 0 } };
        let gateHistory = [];

        function complexMul(a, b) {
            return { re: a.re * b.re - a.im * b.im, im: a.re * b.im + a.im * b.re };
        }

        function complexAdd(a, b) {
            return { re: a.re + b.re, im: a.im + b.im };
        }

        function magnitude(c) {
            return Math.sqrt(c.re * c.re + c.im * c.im);
        }

        function applyGate(gate) {
            const sqrt2inv = 1 / Math.sqrt(2);
            let newAlpha, newBeta;

            switch (gate) {
                case 'X':
                    newAlpha = qubitState.beta;
                    newBeta = qubitState.alpha;
                    break;
                case 'H':
                    newAlpha = {
                        re: sqrt2inv * (qubitState.alpha.re + qubitState.beta.re),
                        im: sqrt2inv * (qubitState.alpha.im + qubitState.beta.im)
                    };
                    newBeta = {
                        re: sqrt2inv * (qubitState.alpha.re - qubitState.beta.re),
                        im: sqrt2inv * (qubitState.alpha.im - qubitState.beta.im)
                    };
                    break;
                case 'Z':
                    newAlpha = qubitState.alpha;
                    newBeta = { re: -qubitState.beta.re, im: -qubitState.beta.im };
                    break;
            }

            qubitState.alpha = newAlpha;
            qubitState.beta = newBeta;
            gateHistory.push(gate);

            updateQubitDisplay();
            updateGateExplanation(gate);

            // Animate button
            event.target.classList.add('applied');
            setTimeout(() => event.target.classList.remove('applied'), 500);
        }

        function resetQubit() {
            qubitState = { alpha: { re: 1, im: 0 }, beta: { re: 0, im: 0 } };
            gateHistory = [];
            updateQubitDisplay();
            document.getElementById('gateHistory').innerHTML = '<div class="history-item" style="color: var(--text-dim);">Click a gate to begin...</div>';
            document.getElementById('gateExplanation').innerHTML = '<p>Click a gate above to see an explanation of what it does!</p>';
        }

        function updateQubitDisplay() {
            const prob0 = magnitude(qubitState.alpha) ** 2;
            const prob1 = magnitude(qubitState.beta) ** 2;

            // Update bars
            document.getElementById('amp0Bar').style.height = (prob0 * 100) + '%';
            document.getElementById('amp1Bar').style.height = (prob1 * 100) + '%';
            document.getElementById('amp0Value').textContent = Math.round(prob0 * 100) + '%';
            document.getElementById('amp1Value').textContent = Math.round(prob1 * 100) + '%';

            // Update state display
            const alphaStr = magnitude(qubitState.alpha).toFixed(2);
            const betaStr = magnitude(qubitState.beta).toFixed(2);

            let stateHtml = '';
            if (prob0 > 0.001) {
                stateHtml += `<span class="amplitude">${alphaStr}</span><span class="ket">|0‚ü©</span>`;
            }
            if (prob0 > 0.001 && prob1 > 0.001) {
                const sign = qubitState.beta.re >= 0 ? '+' : '-';
                stateHtml += `<span class="plus"> ${sign} </span>`;
            }
            if (prob1 > 0.001) {
                stateHtml += `<span class="amplitude">${betaStr}</span><span class="ket">|1‚ü©</span>`;
            }

            document.getElementById('stateDisplay').innerHTML = stateHtml;

            // Update explanation
            let explanation = '';
            if (prob0 > 0.99) explanation = 'The qubit is in state |0‚ü© with 100% certainty';
            else if (prob1 > 0.99) explanation = 'The qubit is in state |1‚ü© with 100% certainty';
            else if (Math.abs(prob0 - 0.5) < 0.01) explanation = 'Perfect superposition! 50% chance of each outcome';
            else explanation = `${Math.round(prob0*100)}% chance of |0‚ü©, ${Math.round(prob1*100)}% chance of |1‚ü©`;

            document.getElementById('stateExplanation').textContent = explanation;

            // Update history
            if (gateHistory.length > 0) {
                document.getElementById('gateHistory').innerHTML = gateHistory.map((g, i) =>
                    `<div class="history-item"><span class="gate-tag">${g}</span> applied</div>`
                ).join('');
            }
        }

        function updateGateExplanation(gate) {
            const explanations = {
                'X': `<h4 style="color: var(--purple);">X Gate Applied</h4>
                      <p>The X gate (Pauli-X) flipped the amplitudes of |0‚ü© and |1‚ü©.</p>
                      <p>If the qubit was |0‚ü©, it's now |1‚ü©. If it was in superposition, the probabilities swapped.</p>`,
                'H': `<h4 style="color: var(--accent);">Hadamard Gate Applied</h4>
                      <p>The H gate created/modified superposition!</p>
                      <p>It transforms |0‚ü© ‚Üí (|0‚ü©+|1‚ü©)/‚àö2 and |1‚ü© ‚Üí (|0‚ü©-|1‚ü©)/‚àö2</p>
                      <p>Notice how applying H twice returns to the original state (try it!)</p>`,
                'Z': `<h4 style="color: var(--green);">Z Gate Applied</h4>
                      <p>The Z gate flipped the phase of |1‚ü© (multiplied by -1).</p>
                      <p>The probabilities didn't change, but the phase did. This affects interference!</p>
                      <p>Try: H ‚Üí Z ‚Üí H and see what happens vs just H ‚Üí H</p>`
            };
            document.getElementById('gateExplanation').innerHTML = explanations[gate];
        }

        // Bell state demo
        let bellStep = 0;

        function bellStateStep(step) {
            bellStep = step;

            if (step === 1) {
                document.getElementById('bellH').style.opacity = '1';
                document.getElementById('bellStep2').disabled = false;

                document.getElementById('prob00').style.height = '50%';
                document.getElementById('prob10').style.height = '50%';
                document.getElementById('prob01').style.height = '0%';
                document.getElementById('prob11').style.height = '0%';

                document.getElementById('val00').textContent = '50%';
                document.getElementById('val10').textContent = '50%';
                document.getElementById('val01').textContent = '0%';
                document.getElementById('val11').textContent = '0%';

                document.getElementById('bellExplanation').innerHTML =
                    'After H: q0 is in superposition (|0‚ü©+|1‚ü©)/‚àö2, q1 is still |0‚ü©<br>' +
                    'State: (|00‚ü© + |10‚ü©)/‚àö2';
            } else if (step === 2) {
                document.getElementById('bellControl').style.opacity = '1';
                document.getElementById('bellTarget').style.opacity = '1';

                document.getElementById('prob00').style.height = '50%';
                document.getElementById('prob10').style.height = '0%';
                document.getElementById('prob01').style.height = '0%';
                document.getElementById('prob11').style.height = '50%';

                document.getElementById('val00').textContent = '50%';
                document.getElementById('val10').textContent = '0%';
                document.getElementById('val01').textContent = '0%';
                document.getElementById('val11').textContent = '50%';

                document.getElementById('bellExplanation').innerHTML =
                    'üéâ <strong>ENTANGLEMENT ACHIEVED!</strong><br>' +
                    'Bell State: (|00‚ü© + |11‚ü©)/‚àö2<br>' +
                    'The qubits are now perfectly correlated!';
            }
        }

        function bellStateReset() {
            bellStep = 0;
            document.getElementById('bellH').style.opacity = '0.3';
            document.getElementById('bellControl').style.opacity = '0.3';
            document.getElementById('bellTarget').style.opacity = '0.3';
            document.getElementById('bellStep2').disabled = true;

            document.getElementById('prob00').style.height = '100%';
            document.getElementById('prob10').style.height = '0%';
            document.getElementById('prob01').style.height = '0%';
            document.getElementById('prob11').style.height = '0%';

            document.getElementById('val00').textContent = '100%';
            document.getElementById('val10').textContent = '0%';
            document.getElementById('val01').textContent = '0%';
            document.getElementById('val11').textContent = '0%';

            document.getElementById('bellExplanation').textContent = 'Initial state: Both qubits are |0‚ü©';
        }

        // Playground circuit builder
        let circuitGates = [];
        let playgroundState = [
            { re: 1, im: 0 },  // |00‚ü©
            { re: 0, im: 0 },  // |01‚ü©
            { re: 0, im: 0 },  // |10‚ü©
            { re: 0, im: 0 }   // |11‚ü©
        ];

        function addToCircuit(gate, qubit) {
            circuitGates.push({ gate, qubit });
            renderCircuit();
            simulateCircuit();
        }

        function clearCircuit() {
            circuitGates = [];
            playgroundState = [
                { re: 1, im: 0 },
                { re: 0, im: 0 },
                { re: 0, im: 0 },
                { re: 0, im: 0 }
            ];
            renderCircuit();
            updatePlaygroundDisplay();
        }

        function renderCircuit() {
            const wire0 = document.getElementById('wire0');
            const wire1 = document.getElementById('wire1');

            wire0.innerHTML = '';
            wire1.innerHTML = '';

            circuitGates.forEach((g, i) => {
                if (g.gate === 'CNOT') {
                    if (g.qubit === 0) {
                        wire0.innerHTML += `<div class="circuit-gate control"></div>`;
                        wire1.innerHTML += `<div class="circuit-gate target">X</div>`;
                    } else {
                        wire0.innerHTML += `<div class="circuit-gate target">X</div>`;
                        wire1.innerHTML += `<div class="circuit-gate control"></div>`;
                    }
                } else {
                    if (g.qubit === 0) {
                        wire0.innerHTML += `<div class="circuit-gate">${g.gate}</div>`;
                        wire1.innerHTML += `<div style="width: 40px;"></div>`;
                    } else {
                        wire0.innerHTML += `<div style="width: 40px;"></div>`;
                        wire1.innerHTML += `<div class="circuit-gate">${g.gate}</div>`;
                    }
                }
            });
        }

        function simulateCircuit() {
            // Reset state
            playgroundState = [
                { re: 1, im: 0 },
                { re: 0, im: 0 },
                { re: 0, im: 0 },
                { re: 0, im: 0 }
            ];

            const sqrt2inv = 1 / Math.sqrt(2);

            circuitGates.forEach(g => {
                let newState = playgroundState.map(s => ({ ...s }));

                if (g.gate === 'X') {
                    if (g.qubit === 0) {
                        // X on qubit 0: swap (00,01) and (10,11)
                        [newState[0], newState[1]] = [playgroundState[1], playgroundState[0]];
                        [newState[2], newState[3]] = [playgroundState[3], playgroundState[2]];
                    } else {
                        // X on qubit 1: swap (00,10) and (01,11)
                        [newState[0], newState[2]] = [playgroundState[2], playgroundState[0]];
                        [newState[1], newState[3]] = [playgroundState[3], playgroundState[1]];
                    }
                } else if (g.gate === 'H') {
                    if (g.qubit === 0) {
                        // H on qubit 0
                        newState[0] = { re: sqrt2inv * (playgroundState[0].re + playgroundState[1].re), im: sqrt2inv * (playgroundState[0].im + playgroundState[1].im) };
                        newState[1] = { re: sqrt2inv * (playgroundState[0].re - playgroundState[1].re), im: sqrt2inv * (playgroundState[0].im - playgroundState[1].im) };
                        newState[2] = { re: sqrt2inv * (playgroundState[2].re + playgroundState[3].re), im: sqrt2inv * (playgroundState[2].im + playgroundState[3].im) };
                        newState[3] = { re: sqrt2inv * (playgroundState[2].re - playgroundState[3].re), im: sqrt2inv * (playgroundState[2].im - playgroundState[3].im) };
                    } else {
                        // H on qubit 1
                        newState[0] = { re: sqrt2inv * (playgroundState[0].re + playgroundState[2].re), im: sqrt2inv * (playgroundState[0].im + playgroundState[2].im) };
                        newState[2] = { re: sqrt2inv * (playgroundState[0].re - playgroundState[2].re), im: sqrt2inv * (playgroundState[0].im - playgroundState[2].im) };
                        newState[1] = { re: sqrt2inv * (playgroundState[1].re + playgroundState[3].re), im: sqrt2inv * (playgroundState[1].im + playgroundState[3].im) };
                        newState[3] = { re: sqrt2inv * (playgroundState[1].re - playgroundState[3].re), im: sqrt2inv * (playgroundState[1].im - playgroundState[3].im) };
                    }
                } else if (g.gate === 'Z') {
                    if (g.qubit === 0) {
                        // Z on qubit 0: negate amplitude where qubit 0 is 1
                        newState[1] = { re: -playgroundState[1].re, im: -playgroundState[1].im };
                        newState[3] = { re: -playgroundState[3].re, im: -playgroundState[3].im };
                    } else {
                        // Z on qubit 1: negate amplitude where qubit 1 is 1
                        newState[2] = { re: -playgroundState[2].re, im: -playgroundState[2].im };
                        newState[3] = { re: -playgroundState[3].re, im: -playgroundState[3].im };
                    }
                } else if (g.gate === 'CNOT') {
                    if (g.qubit === 0) {
                        // CNOT with control=0, target=1
                        // When qubit 0 is 1, flip qubit 1
                        [newState[1], newState[3]] = [playgroundState[3], playgroundState[1]];
                    } else {
                        // CNOT with control=1, target=0
                        // When qubit 1 is 1, flip qubit 0
                        [newState[2], newState[3]] = [playgroundState[3], playgroundState[2]];
                    }
                }

                playgroundState = newState;
            });

            updatePlaygroundDisplay();
        }

        function updatePlaygroundDisplay() {
            const probs = playgroundState.map(s => s.re * s.re + s.im * s.im);

            ['00', '01', '10', '11'].forEach((label, i) => {
                document.getElementById('pg' + label).style.height = (probs[i] * 100) + '%';
                document.getElementById('pgv' + label).textContent = Math.round(probs[i] * 100) + '%';
            });

            // Update state string
            let stateStr = '';
            const labels = ['00', '01', '10', '11'];
            playgroundState.forEach((s, i) => {
                const mag = Math.sqrt(s.re * s.re + s.im * s.im);
                if (mag > 0.001) {
                    if (stateStr) stateStr += ' + ';
                    stateStr += `${mag.toFixed(2)}|${labels[i]}‚ü©`;
                }
            });
            document.getElementById('playgroundState').textContent = stateStr || '0';
        }

        // Initialize
        updateProgress();
    </script>
</body>
</html>
